import{a as o,c as l,x as c}from"./chunk-IJCD47QI.js";var a=class{get items(){return this._items}set items(t){if(!Array.isArray(t)){console.error(`items not instanceof Array, => ${t}`);return}this._items=[...t]}get limit(){return this._limit}set limit(t){if(isNaN(t)){console.error(`limit not instanceof Number, => ${t}`);return}this._limit=t}get totalCount(){return this._totalCount}set totalCount(t){if(isNaN(t)){console.error(`totalCount not instanceof Number, => ${t}`);return}this._totalCount=t}get currentPage(){return this._currentPage}set currentPage(t){if(isNaN(t)){console.error(`currentPage not instanceof Number, => ${t}`);return}this._currentPage=t}get totalPages(){return Math.ceil(this.totalCount/this.limit)}get callBack(){return this._callback}set callBack(t){if(t==null){console.error(`callBackFn not instanceof Number, => ${t}`);return}this._callback=t}get collectionPages(){let t=new Map,e=1;for(let i=0;i<this.items.length;i+=this.limit)t.set(e,this.items.slice(i,i+this.limit)),e++;return t}get collection(){let t=[];for(let e=1;e<=this.currentPage;e++){let i=this.collectionPages.get(e);i&&t.push(...i)}return t}get params(){return{page:this.currentPage,limit:this.limit,collection:this.collection}}get isLoading(){return this._isLoading}set isLoading(t){this._isLoading.next(t)}get isNextDisabled(){return this.currentPage>=this.totalPages}get isPreviousDisabled(){return this.currentPage<=1}get isItemsLessThenLimit(){return this.items.length<=this.limit&&this.isNextDisabled}constructor(t,e,i,s,r,n=!1){this._isLoading=new l(!1),this._items=[],this._limit=5,this._totalCount=0,this._currentPage=1,this.limit=t,this.totalCount=e,this.currentPage=i,s!=null&&(this._items=s),r instanceof Function&&(this.callBack=r,n||this.callBack(this.params))}nextPage(){if(this.isNextDisabled){console.warn(`There are no next pages, total pages is => ${this.totalPages} and currentPage is ${this.currentPage}`);return}this.pageChange(this.currentPage+=1)}previousPage(){if(this.isPreviousDisabled){console.warn("There are no previous pages, currentPage is first");return}this.pageChange(this.currentPage-=1)}pageChange(t,e){if(isNaN(t)){console.error(`pageChange: page not instanceof Number, => ${t}`);return}if(t>this.totalPages||t<=0){console.error(`the page is out of range, => ${t}`);return}this.isLoading=!0,this.currentPage=t;let s=(e||this.callBack)(this.params);s instanceof o&&s.pipe(c(()=>this.isLoading=!1)).subscribe({next:r=>{let{data:n,meta:{pagination:h}}=r;this.currentPage===1?this.items=[...n]:this.items.push(...n),this.totalCount=h.total}})}},m=a;export{m as a};
