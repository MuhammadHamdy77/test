import{a as ge}from"./chunk-4G6OCB2H.js";import{a as fe}from"./chunk-Y2QUZMY4.js";import"./chunk-MXV7BACF.js";import{a as me}from"./chunk-3HTDGFSB.js";import{a as re}from"./chunk-FIAB5B7I.js";import{b as le,d as se,f as pe,i as ce,o as de}from"./chunk-5CVF6KX2.js";import{m as P}from"./chunk-LYU3BLI2.js";import"./chunk-YLZIDGQZ.js";import{c as oe,d as ae}from"./chunk-A3AVJPY7.js";import{a as ue}from"./chunk-IXOM5TK5.js";import"./chunk-BDSYEY4E.js";import{$a as G,C as U,Cb as c,Da as v,Db as d,Eb as Q,Fb as J,G as $,K as x,Ka as _,M as H,Na as T,Oa as D,Pa as i,Qa as a,Ra as g,T as S,Tb as X,U as y,V as k,Va as E,W as z,Xa as C,Ya as f,Yb as Y,_b as ee,b as F,cc as te,dc as O,ha as q,i as N,ia as o,ib as p,ja as R,jb as b,kb as h,mb as K,nc as ne,ob as Z,p as V,qc as ie,ra as m,t as A,tb as W,v as j,va as L,wb as M}from"./chunk-IJCD47QI.js";import"./chunk-YHOLSLLF.js";var he=(()=>{class t{constructor(){this.localizeService=x(P),this.coreRequest=x(fe),this.http=x(O),this.url="/api/nsk-sa-report"}fetchReports(){let e=this.localizeService.LangValue.getValue()||"en",r=new te({fromString:`?populate[image][fields][0]=url&populate[NusukSaReportData][fields][0]=title&populate[NusukSaReportData][fields][1]=periodic_update&populate[NusukSaReportData][fields][2]=language&populate[NusukSaReportData][fields][3]=last_update&populate[NusukSaReportData][populate][tags][fields][0]=title&populate[NusukSaReportData][populate][tags][populate][icon][fields][0]=name&populate[NusukSaReportData][populate][pdf][fields][0]=url&populate[NusukSaReportData][populate][excel][fields][0]=url&fields[0]=id&fields[1]=title&fields[2]=description&fields[3]=updatedAt&locale=${e}`});return this.coreRequest.get(this.url,r).pipe(N(n=>n.data))}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=$({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var xe=(t,l)=>l.title,Ce=(t,l)=>({"pl-6 pr-20":t,"pr-6 pl-20":l}),be=(t,l)=>({"left-5":t,"right-5":l}),ve=(t,l)=>({"right-5":t,"left-5":l});function we(t,l){if(t&1){let e=E();i(0,"button",20),C("click",function(){S(e);let n=f();return y(n.clearSearch())}),k(),i(1,"svg",21),g(2,"path",22),a()()}if(t&2){let e=f();v("ngClass",M(1,ve,e.selectedLang()!=="ar",e.selectedLang()==="ar"))}}function Se(t,l){t&1&&p(0," Searching... ")}function ye(t,l){if(t&1&&(p(0),c(1,"translate"),c(2,"translate"),c(3,"translate")),t&2){let e=f(2);Z(" ",d(1,5,"FOUND")," ",e.reports.length," ",d(2,7,"RESULT"+(e.reports.length!==1?"S":""))," ",d(3,9,"FOR"),' "',e.searchControl.value,'" ')}}function Re(t,l){if(t&1&&(p(0),c(1,"translate"),c(2,"translate")),t&2){let e=f(2);K(" ",d(1,3,"NO_RESULTS_FOUND")," ",d(2,5,"FOR"),' "',e.searchControl.value,'" ')}}function Le(t,l){if(t&1&&(i(0,"div",17)(1,"p",23),L(2,Se,1,0)(3,ye,4,11)(4,Re,3,7),a()()),t&2){let e=f();o(2),_(2,e.isSearching()?2:e.reports.length>0?3:4)}}function ke(t,l){if(t&1&&(i(0,"div",28),g(1,"dynamic-icon",37),i(2,"span",38),p(3),a()()),t&2){let e=l.$implicit;o(),v("iconName",e==null||e.icon==null||e.icon.data==null||e.icon.data.attributes==null?null:e.icon.data.attributes.name),o(2),b(e==null?null:e.title)}}function Ee(t,l){if(t&1){let e=E();i(0,"div",24)(1,"div",25)(2,"div",26),p(3),a(),i(4,"div",27),T(5,ke,4,2,"div",28,xe),a()(),i(7,"div",29)(8,"div",30)(9,"span",31),p(10),c(11,"translate"),a()()(),i(12,"div",32),p(13),c(14,"date"),a(),i(15,"div",32),p(16),a(),i(17,"div",33)(18,"div",34),C("click",function(){let n=S(e).$implicit,s=f(2);return y(s.download(n==null||n.pdf==null||n.pdf.data==null||n.pdf.data.attributes==null?null:n.pdf.data.attributes.url))}),g(19,"dynamic-icon",35),a(),i(20,"div",34),C("click",function(){let n=S(e).$implicit,s=f(2);return y(s.download(n==null||n.excel==null||n.excel.data==null||n.excel.data.attributes==null?null:n.excel.data.attributes.url))}),g(21,"dynamic-icon",36),a()()()}if(t&2){let e=l.$implicit;o(3),b(e==null?null:e.title),o(2),D(e==null?null:e.tags),o(5),b(d(11,4,e==null?null:e.periodic_update)),o(3),b(Q(14,6,e==null?null:e.last_update,"dd MMMM, yyyy a")),o(3),b(e==null?null:e.language)}}function Me(t,l){if(t&1&&(T(0,Ee,22,9,"div",24,xe),c(2,"slice")),t&2){let e=f();D(J(2,0,e.reports,0,e.visibleCount))}}function Oe(t,l){if(t&1){let e=E();i(0,"button",39),C("click",function(){S(e);let n=f();return y(n.viewMore())}),p(1),c(2,"translate"),k(),i(3,"svg",40),g(4,"path",41),a()()}t&2&&(o(),h(" ",d(2,1,"VIEW_MORE")," "))}function Pe(t,l){if(t&1&&(i(0,"div",19),g(1,"app-feedback-bar",42),a()),t&2){let e,r=f();o(),v("modifiedDate",(e=r.pageContent())==null||e.attributes==null?null:e.attributes.updatedAt)("totalVisitors",16293)("totalFeedbacks",16527)}}var it=(()=>{class t{constructor(e,r,n,s){this.route=e,this.searchService=r,this.localizeService=n,this.router=s,this.searchQuery=m(""),this.searchResults=m([]),this.isLoading=m(!1),this.hasResults=m(!1),this.selectedLang=m("en"),this.http=x(O),this.searchControl=new pe(""),this.isSearchFocused=m(!1),this.isSearching=m(!1),this.pageContent=m(null),this.allReports=m([]),this.filteredReports=m([]),this.destroy$=new F,this.searchSubject=new F,this.reportService=x(he),this.visibleCount=4}ngOnInit(){this.setupLanguageSubscription(),this.localizeService.LangValue.subscribe(e=>{this.selectedLang.set(e)}),this.fetchReports(),this.searchControl.valueChanges.pipe(U(this.destroy$),A(300),j(),V(e=>e!==null)).subscribe(e=>{this.isSearching.set(!0),setTimeout(()=>{this.filterReports(e||""),this.isSearching.set(!1)},100)})}fetchReports(){this.reportService.fetchReports().subscribe({next:e=>{this.pageContent.set(e),e?.attributes?.NusukSaReportData&&e?.attributes?.NusukSaReportData?.length>0&&(this.allReports.set(e.attributes.NusukSaReportData),this.filteredReports.set(e.attributes.NusukSaReportData))},error:e=>{console.error("Error fetching Reports:",e)}})}filterReports(e){if(!e.trim()){this.filteredReports.set([...this.allReports()]);return}let r=e.toLowerCase().trim().split(/\s+/).filter(n=>n.length>0);this.filteredReports.set(this.allReports().filter(n=>{let s=n.title.toLowerCase();return r.every(u=>s.includes(u))}))}get reports(){return this.filteredReports()}setupLanguageSubscription(){this.localizeService.LangValue.subscribe({next:e=>{this.selectedLang.set(e)}})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}handleKeyboardEvent(e){e.key==="Escape"&&this.searchControl.value&&(this.clearSearch(),e.preventDefault()),(e.ctrlKey||e.metaKey)&&e.key==="k"&&(e.preventDefault(),this.focusSearch())}focusSearch(){let e=document.querySelector('input[formControlName="searchControl"]');e&&(e.focus(),e.select())}onSearchFocus(){this.isSearchFocused.set(!0)}onSearchBlur(){this.isSearchFocused.set(!1)}clearSearch(){this.searchControl.setValue("")}attachBaseUrl(e){return ue(e)}download(e){let r=this.attachBaseUrl(e);this.http.get(`${r}`,{observe:"response",responseType:"blob"}).subscribe(n=>{let s=n.headers.get("Content-Type"),u="";switch(s){case"application/pdf":u="pdf";break;case"application/vnd.ms-excel":u="xls";break;case"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":u="xlsx";break;case"text/csv":u="csv";break}let w=new Blob([n.body],{type:s}),I=URL.createObjectURL(w),B=document.createElement("a");B.href=I,B.download=`downloaded.${u}`,B.click(),URL.revokeObjectURL(I)})}viewMore(){this.visibleCount+=4}static{this.\u0275fac=function(r){return new(r||t)(R(ne),R(ge),R(P),R(ie))}}static{this.\u0275cmp=H({type:t,selectors:[["app-list-reports"]],hostBindings:function(r,n){r&1&&C("keydown",function(u){return n.handleKeyboardEvent(u)},!1,q)},standalone:!0,features:[W],decls:37,vars:34,consts:[["aria-label","Search Results",1,"w-full","bg-dawn-pink","pb-16"],[1,"container","w-full","flex","flex-col","items-center","justify-center","relative","bg-cover","bg-center","bg-no-repeat","min-h-[90vh]","bg-image"],[1,"absolute","inset-0","bg-black/60"],[1,"z-10","flex","flex-col","items-center","justify-center","pt-24"],[1,"text-white","text-4xl","lg:text-6xl","font-normal","lg:max-w-[600px]","text-center"],[1,"text-white","text-lg","lg:text-xl","font-normal","lg:max-w-[600px]","text-center","pt-2"],[1,"relative","flex","w-full","mt-12"],["id","search-faq-input","aria-label","Search about Hajj, Services...",1,"search-input-shadow","w-full","text-3xl","rounded-[20px]","bg-spring-wood","py-5","text-rangoon-green/60","outline-0","placeholder:text-rangoon-green/20",3,"focus","blur","formControl","placeholder","ngClass"],["width","36","height","36","viewBox","0 0 36 36","fill","none","xmlns","http://www.w3.org/2000/svg",1,"absolute","top-1/2","-translate-y-1/2",3,"ngClass"],["opacity","0.2","fill-rule","evenodd","clip-rule","evenodd","d","M16.375 0.615234C7.62474 0.615234 0.53125 7.70872 0.53125 16.459C0.53125 25.2092 7.62474 32.3027 16.375 32.3027C20.3114 32.3027 23.9126 30.8672 26.6834 28.491L33.3882 35.1958C33.8642 35.6717 34.6358 35.6717 35.1118 35.1958C35.5877 34.7198 35.5877 33.9482 35.1118 33.4722L28.407 26.7674C30.7832 23.9966 32.2188 20.3954 32.2188 16.459C32.2188 7.70872 25.1253 0.615234 16.375 0.615234ZM2.96875 16.459C2.96875 9.05492 8.97093 3.05273 16.375 3.05273C23.7791 3.05273 29.7812 9.05492 29.7812 16.459C29.7812 23.8631 23.7791 29.8652 16.375 29.8652C8.97093 29.8652 2.96875 23.8631 2.96875 16.459Z","fill","#1A1A18"],["type","button","aria-label","Clear search",1,"absolute","top-1/2","-translate-y-1/2","p-2","hover:bg-gray-200","rounded-full","transition-colors",3,"ngClass"],["aria-label","Report",1,"flex","flex-col","bg-dawn-pink","pt-4"],[1,"rounded-xl","relative","-mt-36","mx-auto","w-[90%]","lg:w-[80%]","overflow-x-auto","bg-spring-wood","py-8","md:py-16","px-8","md:px-12"],[1,"flex","flex-col","gap-y-4","text-rangoon-green","font-normal","mb-5","flex-table","min-w-[700px]"],[2,"display","flex","font-weight","bold","border-bottom","2px solid #ccc","padding","8px 0"],[1,"th-header","text-[14px]",2,"flex","2"],[1,"th-header","text-[14px]",2,"flex","1"],[1,"mb-8","text-center"],["aria-label","View more",1,"btn","btn-primary","mt-6","lg:mt-0","lg:mx-auto","md:mx-auto","m-0","gap-x-2"],[1,"mt-24","flex","flex-col"],["type","button","aria-label","Clear search",1,"absolute","top-1/2","-translate-y-1/2","p-2","hover:bg-gray-200","rounded-full","transition-colors",3,"click","ngClass"],["width","20","height","20","viewBox","0 0 20 20","fill","none","xmlns","http://www.w3.org/2000/svg"],["d","M15 5L5 15M5 5L15 15","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],[1,"text-lg","text-rangoon-green/60"],[1,"pt-1","pb-4",2,"display","flex","border-bottom","1px solid #eee"],[1,"flex-[2]"],[1,"font-bold","pb-4"],[1,"flex","gap-2","flex-wrap"],[1,"flex","items-center","justify-center","px-3","py-1","rounded-md","bg-[#F7F6F0]","text-rangoon-green","text-[10px]","font-medium","[background:linear-gradient(0deg,var(--color-dawn-pink,#EEEBE1)_0%,var(--color-dawn-pink,#EEEBE1)_100%),var(--color-spring-wood,#F7F6F0)]"],[2,"flex","1"],[1,"inline-flex","items-center","px-3","py-1","rounded-md","text-sm","font-medium","text-rangoon-green","[background:linear-gradient(0deg,var(--color-dawn-pink,#EEEBE1)_0%,var(--color-dawn-pink,#EEEBE1)_100%),var(--color-spring-wood,#F7F6F0)]"],[1,"text-[#1A1A18]","text-[14px]"],[1,"text-[#1A1A18]","text-[14px]","font-normal",2,"flex","1"],[1,"flex","gap-2","flex-1","cursor-pointer"],[1,"p-[2px]","cursor-pointer",3,"click"],["iconName","pdf-02","color","#806B4B",1,"cursor-pointer"],["iconName","xsl-02","color","#806B4B",1,"cursor-pointer"],["color","#141414",3,"iconName"],[1,"text-[#1A1A18]","text-[14px]","mx-1"],["aria-label","View more",1,"btn","btn-primary","mt-6","lg:mt-0","lg:mx-auto","md:mx-auto","m-0","gap-x-2",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","15","height","8","viewBox","0 0 15 8","fill","none"],["d","M7.49928 7.99954C6.91595 7.99954 6.33262 7.77454 5.89095 7.33288L0.457617 1.89954C0.215951 1.65788 0.215951 1.25788 0.457617 1.01621C0.699284 0.774544 1.09928 0.774544 1.34095 1.01621L6.77428 6.44954C7.17428 6.84954 7.82428 6.84954 8.22428 6.44954L13.6576 1.01621C13.8993 0.774544 14.2993 0.774544 14.541 1.01621C14.7826 1.25788 14.7826 1.65788 14.541 1.89954L9.10762 7.33288C8.66595 7.77454 8.08262 7.99954 7.49928 7.99954Z","fill","white"],[3,"modifiedDate","totalVisitors","totalFeedbacks"]],template:function(r,n){if(r&1&&(i(0,"section",0)(1,"div",1),g(2,"div",2),i(3,"div",3)(4,"h1",4),p(5),a(),i(6,"p",5),p(7),a(),i(8,"div",6)(9,"input",7),c(10,"translate"),C("focus",function(){return n.onSearchFocus()})("blur",function(){return n.onSearchBlur()}),a(),k(),i(11,"svg",8),g(12,"path",9),a(),L(13,we,3,4,"button",10),a()()()(),z(),i(14,"section",11)(15,"div",12)(16,"div",13)(17,"div",14)(18,"div",15),p(19),c(20,"translate"),a(),i(21,"div",16),p(22),c(23,"translate"),a(),i(24,"div",16),p(25),c(26,"translate"),a(),i(27,"div",16),p(28),c(29,"translate"),a(),i(30,"div",16),p(31),c(32,"translate"),a()(),L(33,Le,5,1,"div",17)(34,Me,3,4)(35,Oe,5,3,"button",18),a()(),L(36,Pe,2,3,"div",19),a()),r&2){let s,u,w;o(5),b((s=n.pageContent())==null||s.attributes==null?null:s.attributes.title),o(2),h(" ",(u=n.pageContent())==null||u.attributes==null?null:u.attributes.description," "),o(2),G("placeholder",d(10,16,"SEARCH_RESULTS_REPORT")),v("formControl",n.searchControl)("ngClass",M(28,Ce,n.selectedLang()==="ar",n.selectedLang()!=="ar")),o(2),v("ngClass",M(31,be,n.selectedLang()!=="ar",n.selectedLang()==="ar")),o(2),_(13,n.searchControl.value&&n.searchControl.value.trim()?13:-1),o(6),h(" ",d(20,18,"DATA"),""),o(3),h(" ",d(23,20,"PERIODIC_UPDATE"),""),o(3),h(" ",d(26,22,"LAST_UPDATE"),""),o(3),h(" ",d(29,24,"LANGUAGE"),""),o(3),h(" ",d(32,26,"DOWNLOAD"),""),o(2),_(33,n.searchControl.value&&n.searchControl.value.trim()?33:-1),o(),_(34,n.reports.length>0?34:-1),o(),_(35,n.visibleCount<n.reports.length?35:-1),o(),_(36,!((w=n.pageContent())==null||w.attributes==null)&&w.attributes.updatedAt?36:-1)}},dependencies:[de,le,se,ce,X,ae,oe,Y,ee,re,me],styles:['.bg-image[_ngcontent-%COMP%]{background-image:url("./media/3a16f470be49b8f0471b5c10fa8910d9dc6b30e0-OAF3ON6Z.png")}.arrow-icon[_ngcontent-%COMP%]{transition:transform .3s ease-in-out}.arrow-icon[_ngcontent-%COMP%]:hover{transform:scale(1.1)}.sub-pages-container[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_slideIn .3s ease-in-out}@keyframes _ngcontent-%COMP%_slideIn{0%{opacity:0;transform:translate(-20px)}to{opacity:1;transform:translate(0)}}button[_ngcontent-%COMP%], a[_ngcontent-%COMP%]{transition:all .3s ease-in-out}.active-page[_ngcontent-%COMP%]{border-left:4px solid;border-color:var(--color-primary);padding-left:12px}.active-page-ar[_ngcontent-%COMP%]{border-right:4px solid;border-color:var(--color-primary);padding-right:12px}.search-button[_ngcontent-%COMP%]:hover, .sub-page-button[_ngcontent-%COMP%]:hover{opacity:.8}.arrow-scale[_ngcontent-%COMP%]:hover{transform:scale(1.1)}.opacity-transition[_ngcontent-%COMP%]{transition:opacity .3s ease-in-out}.scale-transition[_ngcontent-%COMP%]{transition:transform .3s ease-in-out}.scale-transition[_ngcontent-%COMP%]:hover{transform:scale(1.05)}.mobile-accordion[_ngcontent-%COMP%]{transition:all .3s ease-in-out}.arrow-icon.rotate-90[_ngcontent-%COMP%]{transform:rotate(90deg)}.mobile-sub-pages[_ngcontent-%COMP%]{margin:4px 0}@media (max-width: 767px){.search-button[_ngcontent-%COMP%]{margin:2px 0}.sub-page-button[_ngcontent-%COMP%]{margin:1px 0}}.accordion-collapsed[_ngcontent-%COMP%]{max-height:0;opacity:0;overflow:hidden}.accordion-expanded[_ngcontent-%COMP%]{max-height:500px;opacity:1}.search-input-shadow[_ngcontent-%COMP%]{box-shadow:0 4px 10px #091e420a}.search-input-shadow[_ngcontent-%COMP%]:focus{box-shadow:0 4px 10px #091e420a;transition:box-shadow .2s ease-in-out}.search-input-shadow[_ngcontent-%COMP%]::placeholder{transition:opacity .2s ease-in-out}.search-input-shadow[_ngcontent-%COMP%]:focus::placeholder{opacity:.5}.flex-table[_ngcontent-%COMP%]   .th-header[_ngcontent-%COMP%]{color:#66645d;font-style:normal;font-weight:500;line-height:normal}.flex-table[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{align-items:flex-start}@media (max-width: 768px){.table-header[_ngcontent-%COMP%]{display:none}.table-row[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;border:1px solid #eee;border-radius:8px;padding:12px;margin-bottom:12px}.table-row[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:space-between;margin-bottom:8px}.table-row[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:before{content:attr(data-label);font-weight:600;color:#666}}']})}}return t})();export{it as ListReportsComponent};
