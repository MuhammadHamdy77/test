import{a as y}from"./chunk-IXOM5TK5.js";import{a as E}from"./chunk-BDSYEY4E.js";import{$ as n,Da as c,G as I,Ha as p,K as b,Ka as z,L as o,M as x,Nb as f,Pa as v,Qa as R,Ra as g,Ya as u,bc as C,ia as O,tb as M,va as S}from"./chunk-IJCD47QI.js";import{e as w}from"./chunk-YHOLSLLF.js";var F=(()=>{class i{constructor(){this.baseUrl=E.strapi_url,this.defaultQuality=85,this.defaultFormat="webp",this.responsiveSizes=[{width:320,height:180,suffix:"xs"},{width:480,height:270,suffix:"sm"},{width:768,height:432,suffix:"md"},{width:1024,height:576,suffix:"lg"},{width:1280,height:720,suffix:"xl"},{width:1600,height:900,suffix:"2xl"},{width:1920,height:1080,suffix:"3xl"}],this.aspectRatios={"16:9":16/9,"4:3":4/3,"1:1":1,"3:2":3/2,"21:9":21/9}}getOptimizedImageUrl(t,a={}){if(!t||t.trim()==="")return"";let{width:e,height:s,format:r=this.defaultFormat,quality:l=this.defaultQuality,fit:d="cover",position:k="center"}=a,m=this.attachBaseUrl(t);if(!e&&!s&&r==="jpg")return m;let h=new URLSearchParams;e&&h.append("width",e.toString()),s&&h.append("height",s.toString()),h.append("format",r),h.append("quality",l.toString()),h.append("fit",d),h.append("position",k);let U=m.includes("?")?"&":"?";return`${m}${U}${h.toString()}`}getResponsiveImageUrls(t,a="16:9"){if(!t||t.trim()==="")return this.getEmptyResponsiveUrls();let e=this.aspectRatios[a];return{mobile:this.getOptimizedImageUrl(t,{width:768,height:Math.round(768/e)}),tablet:this.getOptimizedImageUrl(t,{width:1024,height:Math.round(1024/e)}),desktop:this.getOptimizedImageUrl(t,{width:1600,height:Math.round(1600/e)}),original:this.attachBaseUrl(t),webp:{mobile:this.getOptimizedImageUrl(t,{width:768,height:Math.round(768/e),format:"webp"}),tablet:this.getOptimizedImageUrl(t,{width:1024,height:Math.round(1024/e),format:"webp"}),desktop:this.getOptimizedImageUrl(t,{width:1600,height:Math.round(1600/e),format:"webp"}),original:this.getOptimizedImageUrl(t,{format:"webp"})}}}getSrcset(t,a="16:9"){if(!t||t.trim()==="")return"";let e=this.aspectRatios[a],s=[];return this.responsiveSizes.forEach(r=>{let l=Math.round(r.width/e),d=this.getOptimizedImageUrl(t,{width:r.width,height:l,format:"webp"});s.push(`${d} ${r.width}w`)}),s.join(", ")}getImageForDevice(t,a,e="16:9"){if(!t||t.trim()==="")return"";let s=this.aspectRatios[e],r;switch(a){case"mobile":r=768;break;case"tablet":r=1024;break;case"desktop":r=1600;break;case"large-desktop":r=1920;break;default:r=1600}return this.getOptimizedImageUrl(t,{width:r,height:Math.round(r/s),format:"webp"})}getPictureSources(t,a="16:9"){if(!t||t.trim()==="")return{webp:"",fallback:""};let e=this.aspectRatios[a];return{webp:this.getOptimizedImageUrl(t,{width:1600,height:Math.round(1600/e),format:"webp"}),fallback:this.getOptimizedImageUrl(t,{width:1600,height:Math.round(1600/e),format:"jpg"})}}preloadImage(t,a={}){return new Promise(e=>{if(!t||t.trim()===""){e();return}let s=this.getOptimizedImageUrl(t,a),r=new Image;r.onload=()=>{e()},r.onerror=()=>{e()},r.src=s})}preloadImages(t){return w(this,null,function*(){let a=t.map(e=>this.preloadImage(e.url,e.options));yield Promise.allSettled(a)})}isWebPSupported(){let t=document.createElement("canvas");return t.width=1,t.height=1,t.toDataURL("image/webp").indexOf("data:image/webp")===0}getBestFormat(){return this.isWebPSupported()?"webp":"jpg"}attachBaseUrl(t){return t?t.startsWith("http://")||t.startsWith("https://")?t:`${this.baseUrl}${t}`:""}getEmptyResponsiveUrls(){return{mobile:"",tablet:"",desktop:"",original:"",webp:{mobile:"",tablet:"",desktop:"",original:""}}}static{this.\u0275fac=function(a){return new(a||i)}}static{this.\u0275prov=I({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();function P(i,L){if(i&1&&g(0,"img",1),i&2){let t=u();p(t.classList()),c("ngSrc",t.optimizedImageUrl())("width",t.width())("height",t.height())("alt",t.alt())("fill",!1)}}function A(i,L){if(i&1&&g(0,"img",1),i&2){let t=u();p(t.classList()),c("ngSrc",t.placeholder())("width",t.width())("height",t.height())("alt",t.alt())("fill",!1)}}var V=(()=>{class i{constructor(){this.imageOptimizationService=b(F),this.imageUrl=n(null),this.height=n(350),this.width=n(350),this.alt=n(null),this.classList=n(""),this.wrapperClass=n(""),this.placeholder=n("assets/images/general/placeholder.png"),this.hasValidImage=f(()=>{let t=this.imageUrl();return t&&t!==null}),this.optimizedImageUrl=f(()=>{let t=this.imageUrl();return t?y(t):this.placeholder()})}static{this.\u0275fac=function(a){return new(a||i)}}static{this.\u0275cmp=x({type:i,selectors:[["image-optimization"]],inputs:{imageUrl:[o.SignalBased,"imageUrl"],height:[o.SignalBased,"height"],width:[o.SignalBased,"width"],alt:[o.SignalBased,"alt"],classList:[o.SignalBased,"classList"],wrapperClass:[o.SignalBased,"wrapperClass"],placeholder:[o.SignalBased,"placeholder"]},standalone:!0,features:[M],decls:3,vars:3,consts:[["loading","lazy","priority","false",3,"ngSrc","width","height","alt","class","fill"],["loading","lazy","priority","false",3,"ngSrc","width","height","alt","fill"]],template:function(a,e){a&1&&(v(0,"div"),S(1,P,1,7,"img",0)(2,A,1,7),R()),a&2&&(p(e.wrapperClass()),O(),z(1,e.hasValidImage()?1:2))},dependencies:[C],styles:[".wrapper-class[_ngcontent-%COMP%]{width:262px!important;height:154px!important}"]})}}return i})();var B=function(i){return i.IOS="IOS",i.GOOGLE="GOOGLE",i.HUAWEI="HUAWEI",i}(B||{});var _=function(i){return i.INTERNAL="INTERNAL",i.EXTERNAL="EXTERNAL",i}(_||{});var j=function(i){return i.PRIMARY="PRIMARY",i.SECONDARY="SECONDARY",i.LINK="LINK",i}(j||{});export{F as a,V as b,B as c,j as d,_ as e};
