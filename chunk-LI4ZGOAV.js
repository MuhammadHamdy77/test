import{a as ae}from"./chunk-S6JO7IHX.js";import{a as ne}from"./chunk-Y2QUZMY4.js";import{o as J}from"./chunk-MXV7BACF.js";import{a as ie}from"./chunk-3HTDGFSB.js";import"./chunk-FIAB5B7I.js";import{b as Q,d as X,f as Y,i as ee,o as te}from"./chunk-5CVF6KX2.js";import{m as w}from"./chunk-LYU3BLI2.js";import"./chunk-YLZIDGQZ.js";import{c as W,d as Z}from"./chunk-A3AVJPY7.js";import"./chunk-IXOM5TK5.js";import"./chunk-BDSYEY4E.js";import{$a as U,C as N,Cb as u,Da as g,Db as m,Fa as b,G as O,K as C,Ka as _,M as B,Na as y,Oa as P,Pa as r,Qa as l,Ra as f,T as V,Tb as K,U as I,V as q,Va as R,W as $,Xa as v,Ya as p,b as T,cc as G,ha as A,i as E,ia as o,ib as d,jb as k,kb as S,mb as j,ob as H,p as L,ra as h,t as D,tb as z,v as M,va as x,wb as F}from"./chunk-IJCD47QI.js";import"./chunk-YHOLSLLF.js";var oe=(()=>{class t{constructor(){this.localizeService=C(w),this.coreRequest=C(ne),this.url="/api/nsk-sa-faq"}fetchFaqs(){let e=this.localizeService.LangValue.getValue()||"en",a=new G({fromString:`populate[items][populate]=*&fields[0]=title&fields[1]=description&fields[2]=updatedAt&locale=${e}`});return this.coreRequest.get(this.url,a).pipe(E(i=>i.data))}static{this.\u0275fac=function(a){return new(a||t)}}static{this.\u0275prov=O({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var re=(t,n)=>n.question,se=(t,n)=>({"pl-6 pr-20":t,"pr-6 pl-20":n}),ce=(t,n)=>({"left-5":t,"right-5":n}),pe=(t,n)=>({"right-5":t,"left-5":n});function de(t,n){if(t&1){let e=R();r(0,"button",17),v("click",function(){V(e);let i=p();return I(i.clearSearch())}),q(),r(1,"svg",18),f(2,"path",19),l()()}if(t&2){let e=p();g("ngClass",F(1,pe,e.selectedLang()!=="ar",e.selectedLang()==="ar"))}}function ue(t,n){t&1&&d(0," Searching... ")}function me(t,n){if(t&1&&(d(0),u(1,"translate"),u(2,"translate"),u(3,"translate")),t&2){let e=p(2);H(" ",m(1,5,"FOUND")," ",e.faqs.length," ",m(2,7,"RESULT"+(e.faqs.length!==1?"S":""))," ",m(3,9,"FOR"),' "',e.searchControl.value,'" ')}}function he(t,n){if(t&1&&(d(0),u(1,"translate"),u(2,"translate")),t&2){let e=p(2);j(" ",m(1,3,"NO_RESULTS_FOUND")," ",m(2,5,"FOR"),' "',e.searchControl.value,'" ')}}function fe(t,n){if(t&1&&(r(0,"div",12)(1,"p",20),x(2,ue,1,0)(3,me,4,11)(4,he,3,7),l()()),t&2){let e=p();o(2),_(2,e.isSearching()?2:e.faqs.length>0?3:4)}}function ge(t,n){if(t&1&&(r(0,"div"),f(1,"app-faq",22),l()),t&2){let e=n.$implicit,a=n.$index,i=n.$index,s=n.$count,c=p(2);b("mb-8",i!==s-1),o(),g("faq",e)("questionNumber",a)("showNum",!0)("searchTerm",c.searchControl.value||"")}}function Ce(t,n){if(t&1&&y(0,ge,2,6,"div",21,re),t&2){let e=p();P(e.faqs)}}function _e(t,n){t&1&&(r(0,"div",23)(1,"div",24),d(2,"\u{1F50D}"),l(),r(3,"h3",25),d(4),u(5,"translate"),l(),r(6,"p",26),d(7),u(8,"translate"),l()()),t&2&&(o(4),S(" ",m(5,2,"NO_RESULTS_FOUND"),""),o(3),k(m(8,4,"TrySearching")))}function xe(t,n){if(t&1&&(r(0,"div"),f(1,"app-faq",22),l()),t&2){let e=n.$implicit,a=n.$index,i=n.$index,s=n.$count,c=p(2);b("mb-8",i!==s-1),o(),g("faq",e)("questionNumber",a)("showNum",!0)("searchTerm",c.searchControl.value||"")}}function be(t,n){if(t&1&&y(0,xe,2,6,"div",21,re),t&2){let e=p();P(e.faqs)}}function ve(t,n){if(t&1&&(r(0,"div",16),f(1,"app-feedback-bar",27),l()),t&2){let e=p();o(),g("modifiedDate",e.updatedAt())("totalVisitors",16293)("totalFeedbacks",16527)}}var Ue=(()=>{class t{constructor(){this.localizeService=C(w),this.faqService=C(oe),this.destroy$=new T,this.searchControl=new Y(""),this.pageContent=h(null),this.allFaqs=h([]),this.filteredFaqs=h([]),this.isSearchFocused=h(!1),this.isSearching=h(!1),this.selectedLang=h("en"),this.updatedAt=h(null)}ngOnInit(){this.localizeService.LangValue.subscribe(e=>{this.selectedLang.set(e)}),this.fetchFaqs(),this.searchControl.valueChanges.pipe(N(this.destroy$),D(300),M(),L(e=>e!==null)).subscribe(e=>{this.isSearching.set(!0),setTimeout(()=>{this.filterFaqs(e||""),this.isSearching.set(!1)},100)})}fetchFaqs(){this.faqService.fetchFaqs().subscribe({next:e=>{this.pageContent.set(e),this.updatedAt.set(e.attributes.updatedAt),e?.attributes?.items&&e?.attributes?.items?.length>0&&(this.allFaqs.set(e.attributes.items),this.pagination=new ae(6,e.attributes.items.length,1,e.attributes.items,a=>{this.filteredFaqs.set(a.collection)}))},error:e=>{console.error("Error fetching FAQs:",e)}})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}handleKeyboardEvent(e){e.key==="Escape"&&this.searchControl.value&&(this.clearSearch(),e.preventDefault()),(e.ctrlKey||e.metaKey)&&e.key==="k"&&(e.preventDefault(),this.focusSearch())}focusSearch(){let e=document.querySelector('input[formControlName="searchControl"]');e&&(e.focus(),e.select())}onSearchFocus(){this.isSearchFocused.set(!0)}onSearchBlur(){this.isSearchFocused.set(!1)}filterFaqs(e){if(!e.trim()){this.filteredFaqs.set([...this.allFaqs()]);return}let a=e.toLowerCase().trim().split(/\s+/).filter(i=>i.length>0);this.filteredFaqs.set(this.allFaqs().filter(i=>{let s=i.question.toLowerCase();return a.every(c=>s.includes(c))}))}clearSearch(){this.searchControl.setValue("")}next(){this.pagination.nextPage()}resetPage(){this.pagination.pageChange(1)}handlerViewItems(){this.isNextDisabled?this.resetPage():this.next()}get isNextDisabled(){return this.pagination?.isNextDisabled??!0}get isPreviousDisabled(){return this.pagination?.isPreviousDisabled??!0}get faqs(){return this.filteredFaqs()}static{this.\u0275fac=function(a){return new(a||t)}}static{this.\u0275cmp=B({type:t,selectors:[["app-faq-page"]],hostBindings:function(a,i){a&1&&v("keydown",function(c){return i.handleKeyboardEvent(c)},!1,A)},standalone:!0,features:[z],decls:25,vars:25,consts:[["aria-label","About Umrah",1,"w-full","bg-dawn-pink"],[1,"container","w-full","flex","flex-col","items-center","justify-center","relative","bg-cover","bg-center","bg-no-repeat","min-h-[90vh]","bg-image"],[1,"absolute","inset-0","bg-black/60"],[1,"z-10","flex","flex-col","items-center","justify-center","gap-y-6"],[1,"text-white","text-4xl","lg:text-6xl","font-normal","lg:max-w-[600px]","text-center"],[1,"text-white","text-lg","lg:text-xl","font-normal","lg:max-w-[600px]","text-center"],[1,"relative","flex","w-full","mt-12"],["id","search-faq-input","aria-label","Search about Hajj, Services...",1,"search-input-shadow","w-full","text-3xl","rounded-[20px]","bg-spring-wood","py-5","text-rangoon-green/60","outline-0","placeholder:text-rangoon-green/20",3,"focus","blur","formControl","placeholder","ngClass"],["width","36","height","36","viewBox","0 0 36 36","fill","none","xmlns","http://www.w3.org/2000/svg",1,"absolute","top-1/2","-translate-y-1/2",3,"ngClass"],["opacity","0.2","fill-rule","evenodd","clip-rule","evenodd","d","M16.375 0.615234C7.62474 0.615234 0.53125 7.70872 0.53125 16.459C0.53125 25.2092 7.62474 32.3027 16.375 32.3027C20.3114 32.3027 23.9126 30.8672 26.6834 28.491L33.3882 35.1958C33.8642 35.6717 34.6358 35.6717 35.1118 35.1958C35.5877 34.7198 35.5877 33.9482 35.1118 33.4722L28.407 26.7674C30.7832 23.9966 32.2188 20.3954 32.2188 16.459C32.2188 7.70872 25.1253 0.615234 16.375 0.615234ZM2.96875 16.459C2.96875 9.05492 8.97093 3.05273 16.375 3.05273C23.7791 3.05273 29.7812 9.05492 29.7812 16.459C29.7812 23.8631 23.7791 29.8652 16.375 29.8652C8.97093 29.8652 2.96875 23.8631 2.96875 16.459Z","fill","#1A1A18"],["type","button","aria-label","Clear search",1,"absolute","top-1/2","-translate-y-1/2","p-2","hover:bg-gray-200","rounded-full","transition-colors",3,"ngClass"],[1,"rounded-xl","relative","-mt-36","mx-auto","w-[90%]","lg:w-[80%]","bg-spring-wood","py-16","px-12","mb-12"],[1,"mb-8","text-center"],["type","button","aria-label","View more",1,"btn-primary","flex!","items-center","gap-2","cursor-pointer","mx-auto","mb-12",3,"click"],["width","21","height","20","viewBox","0 0 21 20","fill","none","xmlns","http://www.w3.org/2000/svg"],["d","M10.4993 13.9995C9.91595 13.9995 9.33262 13.7745 8.89095 13.3329L3.45762 7.89954C3.21595 7.65788 3.21595 7.25788 3.45762 7.01621C3.69928 6.77454 4.09928 6.77454 4.34095 7.01621L9.77428 12.4495C10.1743 12.8495 10.8243 12.8495 11.2243 12.4495L16.6576 7.01621C16.8993 6.77454 17.2993 6.77454 17.541 7.01621C17.7826 7.25788 17.7826 7.65788 17.541 7.89954L12.1076 13.3329C11.666 13.7745 11.0826 13.9995 10.4993 13.9995Z","fill","white"],[1,"mt-24","flex","flex-col"],["type","button","aria-label","Clear search",1,"absolute","top-1/2","-translate-y-1/2","p-2","hover:bg-gray-200","rounded-full","transition-colors",3,"click","ngClass"],["width","20","height","20","viewBox","0 0 20 20","fill","none","xmlns","http://www.w3.org/2000/svg"],["d","M15 5L5 15M5 5L15 15","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],[1,"text-lg","text-rangoon-green/60"],[3,"mb-8"],[3,"faq","questionNumber","showNum","searchTerm"],[1,"text-center","py-12"],[1,"text-6xl","mb-4"],[1,"text-2xl","font-medium","text-rangoon-green","mb-2"],[1,"text-rangoon-green/60"],[3,"modifiedDate","totalVisitors","totalFeedbacks"]],template:function(a,i){if(a&1&&(r(0,"section",0)(1,"div",1),f(2,"div",2),r(3,"div",3)(4,"h1",4),d(5),l(),r(6,"p",5),d(7),l(),r(8,"div",6)(9,"input",7),u(10,"translate"),v("focus",function(){return i.onSearchFocus()})("blur",function(){return i.onSearchBlur()}),l(),q(),r(11,"svg",8),f(12,"path",9),l(),x(13,de,3,4,"button",10),l()()(),$(),r(14,"div",11),x(15,fe,5,1,"div",12)(16,Ce,2,0)(17,_e,9,6)(18,be,2,0),l(),r(19,"button",13),v("click",function(){return i.handlerViewItems()}),d(20),u(21,"translate"),q(),r(22,"svg",14),f(23,"path",15),l()(),x(24,ve,2,3,"div",16),l()),a&2){let s,c;o(5),k((s=i.pageContent())==null||s.attributes==null?null:s.attributes.title),o(2),S(" ",(c=i.pageContent())==null||c.attributes==null?null:c.attributes.description," "),o(2),U("placeholder",m(10,15,"SEARCH_ABOUT_HAJJ_UMRAH")),g("formControl",i.searchControl)("ngClass",F(19,se,i.selectedLang()==="ar",i.selectedLang()!=="ar")),o(2),g("ngClass",F(22,ce,i.selectedLang()!=="ar",i.selectedLang()==="ar")),o(2),_(13,i.searchControl.value&&i.searchControl.value.trim()?13:-1),o(),b("search-loading",i.isSearching()),o(),_(15,i.searchControl.value&&i.searchControl.value.trim()?15:-1),o(),_(16,i.faqs.length>0?16:i.searchControl.value&&i.searchControl.value.trim()?17:18),o(4),S(" ",m(21,17,i.isNextDisabled?"VIEW_LESS":"VIEW_MORE")," "),o(2),b("rotate-180",i.isNextDisabled),o(2),_(24,i.updatedAt()?24:-1)}},dependencies:[te,Q,X,ee,J,K,Z,W,ie],styles:['.bg-image[_ngcontent-%COMP%]{background-image:url("./media/5361ef628a918220260485b2888bb9d283ac41a0-N3VFWUTN.png")}.search-input-shadow[_ngcontent-%COMP%]{box-shadow:0 4px 10px #091e420a}.search-input-shadow[_ngcontent-%COMP%]:focus{box-shadow:0 4px 20px #091e4220;transition:box-shadow .2s ease-in-out}.search-input-shadow[_ngcontent-%COMP%]::placeholder{transition:opacity .2s ease-in-out}.search-input-shadow[_ngcontent-%COMP%]:focus::placeholder{opacity:.5}mark[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_highlight-fade-in .3s ease-in-out}@keyframes _ngcontent-%COMP%_highlight-fade-in{0%{background-color:transparent}to{background-color:#fef08a}}app-faq[_ngcontent-%COMP%]{transition:opacity .2s ease-in-out}.search-loading[_ngcontent-%COMP%]{opacity:.7;pointer-events:none}']})}}return t})();export{Ue as FaqPageComponent};
